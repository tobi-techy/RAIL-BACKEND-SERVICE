# ============================================
# RAIL Backend Service - Environment Variables
# ============================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control!

# ============================================
# Application Configuration
# ============================================
ENVIRONMENT=development
PORT=8080
BASE_URL=http://localhost:8080

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=postgres://postgres:postgres@localhost:5432/rail_service_dev?sslmode=disable

# For production, use a secure connection:
# DATABASE_URL=postgres://username:password@host:5432/rail_service_prod?sslmode=require

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# Security & Authentication
# ============================================
# JWT Secret - MUST be changed in production (min 32 characters)
JWT_SECRET=your-super-secret-jwt-key-change-in-production-min-32-chars

# Encryption Key - MUST be exactly 32 bytes for AES-256
ENCRYPTION_KEY=your-32-byte-encryption-key-!!

# ============================================
# Circle API Configuration (Wallet Infrastructure)
# ============================================
CIRCLE_API_KEY=your-circle-api-key
CIRCLE_BASE_URL=https://api.circle.com
CIRCLE_ENVIRONMENT=sandbox
# Options: sandbox, production

# Circle Entity Secret (encrypted)
CIRCLE_ENTITY_SECRET_CIPHERTEXT=your-encrypted-entity-secret

# Circle Wallet Configuration
CIRCLE_DEFAULT_WALLET_SET_ID=your-wallet-set-id
CIRCLE_DEFAULT_WALLET_SET_NAME=your-wallet-set-name

# Supported blockchain chains (comma-separated)
CIRCLE_SUPPORTED_CHAINS=ETH,MATIC,AVAX

# ============================================
# KYC/AML Configuration
# ============================================
KYC_PROVIDER=sumsub
# Options: sumsub, onfido, etc.

# Sumsub Configuration
SUMSUB_APP_TOKEN=your-sumsub-app-token
SUMSUB_SECRET_KEY=your-sumsub-secret-key
SUMSUB_BASE_URL=https://api.sumsub.com
SUMSUB_LEVEL_NAME=basic-kyc-level

# Generic KYC Configuration (if not using Sumsub)
KYC_API_KEY=your-kyc-api-key
KYC_API_SECRET=your-kyc-api-secret
KYC_BASE_URL=https://api.kyc-provider.com
KYC_CALLBACK_URL=https://your-domain.com/api/v1/kyc/callback
KYC_LEVEL_NAME=basic

# ============================================
# Email Service Configuration
# ============================================
EMAIL_PROVIDER=mailpit
# Options: sendgrid, resend, mailpit, smtp

# Mailpit Configuration (Recommended for Development)
# No API key needed - just run: docker-compose up mailpit
# Web UI: http://localhost:8025
SMTP_HOST=localhost
SMTP_PORT=1025

# Resend Configuration (Production)
RESEND_API_KEY=your-resend-api-key
RESEND_FROM_EMAIL=noreply@yourdomain.com
RESEND_FROM_NAME=RAIL

# SendGrid Configuration (Alternative)
EMAIL_API_KEY=your-sendgrid-api-key
EMAIL_BASE_URL=https://api.sendgrid.com
EMAIL_FROM_EMAIL=noreply@yourdomain.com
EMAIL_FROM_NAME=RAIL
EMAIL_REPLY_TO=support@yourdomain.com

# ============================================
# Alpaca Brokerage Integration
# ============================================
ALPACA_API_KEY=your-alpaca-api-key
ALPACA_API_SECRET=your-alpaca-api-secret
ALPACA_ENVIRONMENT=paper
# Options: paper, live

# Alpaca API Endpoints
ALPACA_BASE_URL=https://paper-api.alpaca.markets
# For production: https://api.alpaca.markets

ALPACA_DATA_BASE_URL=https://data.alpaca.markets
# Same for both paper and live trading

# ============================================
# Due Integration (Treasury/Banking)
# ============================================
DUE_API_KEY=your-due-api-key
DUE_ACCOUNT_ID=your-due-account-id
DUE_BASE_URL=https://api.due.com

# ============================================
# Bridge API Configuration (Alternative to Circle)
# ============================================
BRIDGE_API_KEY=your-bridge-api-key
BRIDGE_BASE_URL=https://api.bridge.xyz
BRIDGE_ENVIRONMENT=sandbox
BRIDGE_TIMEOUT=30
BRIDGE_MAX_RETRIES=3
BRIDGE_SUPPORTED_CHAINS=ETH,MATIC,AVAX,SOL

# ============================================
# 0G Storage & Compute (AI/ML Infrastructure)
# ============================================
# 0G Storage Configuration
ZEROG_STORAGE_RPC_ENDPOINT=https://rpc-storage.0g.ai
ZEROG_STORAGE_INDEXER_RPC=https://indexer.0g.ai
ZEROG_STORAGE_PRIVATE_KEY=your-0g-storage-private-key

# 0G Compute Configuration
ZEROG_COMPUTE_BROKER_ENDPOINT=https://broker.0g.ai
ZEROG_COMPUTE_PRIVATE_KEY=your-0g-compute-private-key
ZEROG_COMPUTE_PROVIDER_ID=your-provider-id

# ============================================
# Monitoring & Observability
# ============================================
# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development

# OpenTelemetry (Tracing)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=rail-service

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# ============================================
# Feature Flags
# ============================================
ENABLE_RECONCILIATION=false
ENABLE_AI_CFO=false
ENABLE_COPY_TRADING=false
ENABLE_DEBIT_CARDS=false

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# ============================================
# CORS Configuration
# ============================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
# Options: debug, info, warn, error

LOG_FORMAT=json
# Options: json, console

# ============================================
# Worker Configuration
# ============================================
# Wallet Provisioning
WALLET_PROVISIONING_ENABLED=true
WALLET_PROVISIONING_POLL_INTERVAL=30s
WALLET_PROVISIONING_MAX_CONCURRENCY=5
WALLET_PROVISIONING_BATCH_SIZE=10

# Funding Webhook Workers
FUNDING_WEBHOOK_WORKERS=5
FUNDING_WEBHOOK_RECONCILIATION_INTERVAL=10m
FUNDING_WEBHOOK_RECONCILIATION_THRESHOLD=15m
FUNDING_WEBHOOK_RECONCILIATION_BATCH_SIZE=50

# ============================================
# Timeouts & Limits
# ============================================
HTTP_READ_TIMEOUT=30s
HTTP_WRITE_TIMEOUT=30s
HTTP_IDLE_TIMEOUT=120s

DB_MAX_OPEN_CONNECTIONS=25
DB_MAX_IDLE_CONNECTIONS=5
DB_CONNECTION_MAX_LIFETIME=5m

# ============================================
# Development/Testing Only
# ============================================
# Set to true to enable debug features (DO NOT use in production)
DEBUG_MODE=false
ENABLE_SWAGGER=true
ENABLE_PPROF=false

# Mock external services for testing
MOCK_CIRCLE_API=false
MOCK_ALPACA_API=false
MOCK_KYC_PROVIDER=false
