environment: development
log_level: info

server:
  port: 8080
  host: 0.0.0.0
  read_timeout: 30
  write_timeout: 30
  rate_limit_per_min: 100
  supported_versions: ["v1"]
  default_version: "v1"
  allowed_origins:
    - "http://localhost:3000"
    - "http://localhost:8080"

database:
  url: ""
  host: localhost
  port: 5432
  name: stack_service
  user: postgres
  password: postgres
  ssl_mode: disable
  max_open_conns: 25
  max_idle_conns: 5
  conn_max_lifetime: 300
  query_timeout: 30
  max_retries: 3
  read_replicas: []

redis:
  host: localhost
  port: 6379
  password: ""
  db: 0
  cluster_mode: false
  cluster_addrs: []
  max_retries: 3
  pool_size: 10

jwt:
  secret: "your-jwt-secret-key-change-in-production"
  access_token_ttl: 900      # 15 minutes (short-lived for security)
  refresh_token_ttl: 604800  # 7 days
  issuer: "stack_service"

security:
  mfa_grace_period_days: 7
  high_value_threshold: 50000
  geo_api_key: ""
  enable_geo_blocking: true
  enable_vpn_detection: true
  fraud_score_threshold: 0.7
  fraud_review_threshold: 0.5
  incident_alert_webhook: ""
  auto_block_threshold: 20
  encryption_key: "9foZ22ccMYtiFckFMoLRUdLQzm3bxKeE5eC8dlXOrHDPKGwTOxuEd0jTCTBPCveb"
  max_login_attempts: 5
  lockout_duration: 900
  require_mfa: false
  password_min_length: 8
  session_timeout: 3600
  # Enhanced security settings
  bcrypt_cost: 12                    # Increased from default 10 for stronger hashing
  password_history_count: 5          # Prevent reuse of last 5 passwords
  password_expiration_days: 90       # Force password change every 90 days
  access_token_ttl: 900              # 15 minutes (override JWT setting)
  refresh_token_ttl: 604800          # 7 days
  enable_token_blacklist: true       # Enable token revocation via Redis
  check_password_breaches: true      # Check passwords against HaveIBeenPwned
  captcha_threshold: 3               # Require CAPTCHA after 3 failed login attempts
  secrets_provider: "env"            # "env" or "aws_secrets_manager"
  aws_secrets_region: "us-east-1"    # AWS region for Secrets Manager
  aws_secrets_prefix: "rail/"        # Prefix for secret names in AWS
  secret_rotation_days: 90           # Rotate secrets every 90 days

workers:
  count: 10
  job_timeout: 300

circle:
  api_key: ""
  environment: "sandbox"
  base_url: ""
  entity_secret_ciphertext: ""
  default_wallet_set_id: ""
  default_wallet_set_name: "STACK-WalletSet"
  supported_chains: ["SOL-DEVNET"]

kyc:
  provider: ""
  api_key: ""
  api_secret: ""
  base_url: "https://netverify.com"
  callback_url: ""
  environment: "development"
  user_agent: "Stack-Service/1.0"
  level_name: "basic-kyc"

email:
  provider: ""
  api_key: ""
  from_email: "no-reply@stackservice.com"
  from_name: "Stack Service"
  base_url: "http://localhost:3000"
  environment: "development"
  reply_to: ""

sms:
  provider: ""
  api_key: ""
  api_secret: ""
  from_number: ""
  environment: "development"

verification:
  code_length: 6
  code_ttl_minutes: 10
  max_attempts: 3
  rate_limit_per_hour: 3

alpaca:
  client_id: "CAQ5K26YD7DGSJBUCLOT3L373B"
  secret_key: "Avw9W3Xf35fr4gNLGg8umUi5mvgivFdSccCFq1fWSvHr"
  base_url: "https://broker-api.sandbox.alpaca.markets"
  data_base_url: "https://data.sandbox.alpaca.markets"
  environment: "sandbox"
  timeout: 30
  auth_method: "oauth2"  # oauth2 or legacy

due:
  api_key: "key_live_acct_EmIUtIyO9aEC1V3SL95trsDjuE65Mpzh"
  account_id: ""
  base_url: "https://api.due.network/v1"

  transaction_limits:
  deposit:
    daily: 10000.00
    weekly: 50000.00
    monthly: 200000.00
  withdrawal:
    daily: 5000.00
    weekly: 25000.00
    monthly: 100000.00
  trade:
    daily: 50000.00
    weekly: 250000.00
    monthly: 1000000.00
  transfer:
    daily: 10000.00
    weekly: 50000.00
    monthly: 200000.00
  risk_threshold: 0.9

social_auth:
  google:
    client_id: ""
    client_secret: ""
    redirect_uri: ""
  apple:
    client_id: ""
    client_secret: ""
    redirect_uri: ""

webauthn:
  rp_display_name: "RAIL"
  rp_id: "rail.app"
  rp_origins:
    - "https://rail.app"

ai:
  primary_provider: "openai"  # or "gemini"
  fallback_provider: "gemini"
  openai:
    api_key: "${OPENAI_API_KEY}"
    model: "gpt-3.5-turbo"  # Free tier model
    max_tokens: 1000
    temperature: 0.7
    timeout: 30s
    rate_limit_rpm: 3  # Requests per minute (free tier limit)
  gemini:
    api_key: "${GEMINI_API_KEY}"
    model: "gemini-1.5-flash"  # Free tier model
    max_tokens: 1000
    temperature: 0.7
    timeout: 30s
    rate_limit_rpm: 15  # Requests per minute (free tier limit)
  prompts:
    wrapped_template: "prompts/wrapped.txt"
    chat_template: "prompts/chat.txt"
# News Configuration
news:
  provider: "alpaca"  # or "finnhub"
  api_key: "${NEWS_API_KEY}"
  fetch_interval: "1h"
  articles_per_user: 5
  relevance_threshold: 0.6
# Wrapped Configuration
wrapped:
  schedule: "0 0 * * 0"  # Sunday midnight
  batch_size: 100
  enable_notifications: true
  cards_enabled:
    - performance_headline
    - top_mover
    - personality
    - contributions
    - news
    - suggestion
# Chat Configuration
chat:
  max_context_messages: 10
  session_timeout: "24h"
  enable_safety_filter: true
  rate_limit_per_hour: 50
